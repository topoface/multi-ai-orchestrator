# ğŸ” ë™ì‘ ì›ë¦¬ ìƒì„¸ ì„¤ëª…

## ğŸ¯ ì „ì²´ íë¦„ë„

```
ì‚¬ìš©ì ì§ˆë¬¸: "RTL ê³±ì…ˆì„ ì–´ë–»ê²Œ ìµœì í™”í•˜ì§€?"
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ í† ë¡  ì‹œì‘ (debate_engine.py)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Round 1: Claude ì œì•ˆ                               â”‚
â”‚   â†’ Anthropic API í˜¸ì¶œ                             â”‚
â”‚   â†’ "ë°©ë²• A: íŒŒì´í”„ë¼ì¸ ìµœì í™”"                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Round 1: Gemini ê²€í†                                â”‚
â”‚   â†’ Gemini API í˜¸ì¶œ                                â”‚
â”‚   â†’ "ë°©ë²• B: ë³‘ë ¬ ì²˜ë¦¬ê°€ ë” ë‚˜ìŒ"                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í•©ì˜ë„ ê³„ì‚°                                         â”‚
â”‚   â†’ í‚¤ì›Œë“œ ìœ ì‚¬ë„: 40%                              â”‚
â”‚   â†’ ì˜ë¯¸ë¡ ì  ìœ ì‚¬ë„: 50% (ì„ë² ë”©)                    â”‚
â”‚   â†’ ìµœì¢…: 45% (ê³„ì† í† ë¡ )                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Round 2: ë°˜ë³µ...                                   â”‚
â”‚   â†’ í•©ì˜ë„ 72%                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Round 3: ì ˆì¶©ì•ˆ                                    â”‚
â”‚   â†’ í•©ì˜ë„ 88% âœ“ (85% ì´ìƒ!)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ ê²°ê³¼ ì €ì¥ (decision_logger.py)                  â”‚
â”‚   â†’ docs/brain/DECISIONS.md ì—…ë°ì´íŠ¸                â”‚
â”‚   â†’ debate_20250117_210530.json ìƒì„±               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£ Vertex AI ë™ê¸°í™” (vertex_learner.py)            â”‚
â”‚   â†’ í…ìŠ¤íŠ¸ â†’ ì„ë² ë”© (768ì°¨ì› ë²¡í„°)                  â”‚
â”‚   â†’ BigQuery ì €ì¥ (ê²€ìƒ‰ìš©)                          â”‚
â”‚   â†’ GCS ë°±ì—… (ì›ë³¸ ë³´ê´€)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        ì™„ë£Œ! ğŸ‰
```

---

## ğŸ§  í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ë™ì‘

### 1. Debate Engine (í† ë¡  ì—”ì§„)

**íŒŒì¼**: `.claude/skills/debate-request/debate_engine.py`

**í•˜ëŠ” ì¼**:
```python
# 1. Claude API í˜¸ì¶œ
claude_response = anthropic.messages.create(
    model="claude-sonnet-4-5",
    messages=[{"role": "user", "content": "RTL ê³±ì…ˆ ìµœì í™” ë°©ë²•?"}]
)

# 2. Gemini API í˜¸ì¶œ
gemini_response = genai_model.generate_content(
    "ClaudeëŠ” Aë¥¼ ì œì•ˆí–ˆëŠ”ë°, ë‹¹ì‹  ìƒê°ì€?"
)

# 3. í•©ì˜ë„ ê³„ì‚°
consensus = calculate_similarity(claude_text, gemini_text)

# 4. ê²°ê³¼ ì €ì¥
save_result({
    "topic": "RTL ê³±ì…ˆ ìµœì í™”",
    "consensus": 0.88,
    "claude_position": "...",
    "gemini_position": "..."
})
```

---

### 2. Vertex AI Learner (ì§€ì‹ í•™ìŠµ)

**íŒŒì¼**: `.claude/agents/vertex-learner/vertex_learner.py`

**í•˜ëŠ” ì¼**:
```python
# 1. í…ìŠ¤íŠ¸ë¥¼ ì½ìŒ
text = "RTL ê³±ì…ˆ ìµœì í™”ëŠ” íŒŒì´í”„ë¼ì¸ ê¸°ë²•ì„..."

# 2. ì„ë² ë”© ìƒì„± (Vertex AI API)
embedding = embedding_model.get_embeddings([text])[0]
# â†’ [0.123, -0.456, 0.789, ...] (768ê°œ ìˆ«ì)

# 3. BigQuery ì €ì¥
bigquery.insert_rows({
    "content": text,
    "embedding": embedding,  # ê²€ìƒ‰ì— ì‚¬ìš©
    "metadata": {"type": "decision", "date": "2025-01-17"}
})

# 4. GCS ë°±ì—…
gcs.upload(text, "decisions/decision_20250117.txt")
```

**ì™œ ì´ë ‡ê²Œ?**
- BigQuery: ì„ë² ë”©ìœ¼ë¡œ **ì˜ë¯¸ë¡ ì  ê²€ìƒ‰** ê°€ëŠ¥
- GCS: ì›ë³¸ í…ìŠ¤íŠ¸ **ì˜êµ¬ ë³´ê´€**

---

### 3. GitHub Sync (ë™ê¸°í™”)

**íŒŒì¼**: `.claude/skills/github-sync/sync_manager.py`

**GitHub â†’ Vertex AI**:
```python
# 1. ë³€ê²½ëœ íŒŒì¼ ì°¾ê¸°
changed_files = git_diff("docs/brain/")
# â†’ ["DECISIONS.md", "CONTEXT.md"]

# 2. ê° íŒŒì¼ ì„ë² ë”© ìƒì„±
for file in changed_files:
    text = read_file(file)
    embedding = generate_embedding(text)
    bigquery.insert(text, embedding)
    gcs.backup(text)
```

**Vertex AI â†’ GitHub**:
```python
# 1. GCSì—ì„œ ìµœì‹  ê²°ì • ê°€ì ¸ì˜¤ê¸°
latest_decisions = gcs.list("decisions/", limit=5)

# 2. docs/brain/DECISIONS.md ì—…ë°ì´íŠ¸
for decision in latest_decisions:
    append_to_file("docs/brain/DECISIONS.md", decision)

# 3. ìë™ ì»¤ë°‹
git_commit("Update decisions from Vertex AI")
```

---

### 4. GitHub Actions (ìë™í™”)

**íŒŒì¼**: `.github/workflows/ai-debate-trigger.yml`

**Issue ìƒì„± ì‹œ ìë™ ì‹¤í–‰**:
```yaml
on:
  issues:
    types: [opened, labeled]

jobs:
  run-debate:
    runs-on: ubuntu-latest
    steps:
      - name: Issue ë‚´ìš© ì½ê¸°
        run: |
          TOPIC=$(gh issue view $ISSUE_NUMBER --json title)

      - name: í† ë¡  ì‹¤í–‰
        run: |
          python .github/scripts/multi_ai_runner.py \
            --topic "$TOPIC" \
            --issue-number $ISSUE_NUMBER

      - name: ê²°ê³¼ë¥¼ Issueì— ëŒ“ê¸€
        run: |
          gh issue comment $ISSUE_NUMBER --body "$RESULT"

      - name: í•©ì˜ ë„ë‹¬ ì‹œ Issue ì¢…ë£Œ
        run: |
          if [ $CONSENSUS -ge 85 ]; then
            gh issue close $ISSUE_NUMBER
          fi
```

---

## ğŸ” ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ

### ì˜ˆì‹œ 1: í† ë¡  ì‹œì‘

```python
# scripts/auto-debate.py
from debate_engine import DebateEngine

# í† ë¡  ì—”ì§„ ìƒì„±
engine = DebateEngine(
    topic="RTL ê³±ì…ˆ ìµœì í™”",
    max_rounds=4
)

# í† ë¡  ì‹¤í–‰
result = engine.conduct_debate()

# ê²°ê³¼:
# {
#   "topic": "RTL ê³±ì…ˆ ìµœì í™”",
#   "rounds": 3,
#   "consensus_score": 0.88,
#   "claude_final_position": "íŒŒì´í”„ë¼ì¸ + ë³‘ë ¬ ì¡°í•©",
#   "gemini_final_position": "ë™ì¼í•œ ì ‘ê·¼",
#   "status": "adopted"
# }
```

---

### ì˜ˆì‹œ 2: ê²€ìƒ‰

```python
# .claude/skills/vertex-search/vertex_search.py
from vertex_learner import VertexLearner

learner = VertexLearner()

# ê²€ìƒ‰ì–´ ì„ë² ë”©
query_embedding = learner.get_embedding("NoiseComputer ê³±ì…ˆ")

# BigQuery ìœ ì‚¬ë„ ê²€ìƒ‰
results = bigquery.query(f"""
    SELECT content,
           ML.DISTANCE(embedding, {query_embedding}, 'COSINE') as distance
    FROM knowledge_base.embeddings
    WHERE distance < 0.3  -- ìœ ì‚¬ë„ 70% ì´ìƒ
    ORDER BY distance ASC
    LIMIT 10
""")

# ê²°ê³¼:
# [
#   {"content": "NoiseComputer 256x256...", "similarity": 0.92},
#   {"content": "RTL ê³±ì…ˆ ìµœì í™”...", "similarity": 0.85},
#   ...
# ]
```

---

## ğŸ“Š ë°ì´í„° íë¦„

### í† ë¡  â†’ ì €ì¥ â†’ ê²€ìƒ‰

```
1ï¸âƒ£ í† ë¡  ì§„í–‰
   â†“
debate_result.json ìƒì„±
   {
     "topic": "RTL ê³±ì…ˆ",
     "consensus": 0.88,
     "claude_position": "ë°©ë²• A+B",
     "gemini_position": "ë™ì˜"
   }

2ï¸âƒ£ íŒŒì¼ ì €ì¥
   â†“
docs/brain/DECISIONS.md ì—…ë°ì´íŠ¸
   ## Decision: RTL ê³±ì…ˆ ìµœì í™”
   **Consensus**: 88%
   ë°©ë²• Aì™€ Bë¥¼ ì¡°í•©...

3ï¸âƒ£ Vertex AI ë™ê¸°í™”
   â†“
ì„ë² ë”© ìƒì„± (768ì°¨ì› ë²¡í„°)
   [0.123, -0.456, 0.789, ...]
   â†“
BigQuery ì €ì¥
   content        | embedding       | metadata
   "ë°©ë²• Aì™€ B..." | [0.123, ...]   | {"type":"decision"}
   â†“
GCS ë°±ì—…
   gs://bucket/decisions/decision_20250117.json

4ï¸âƒ£ ë‚˜ì¤‘ì— ê²€ìƒ‰
   â†“
"ê³±ì…ˆ ìµœì í™”" ê²€ìƒ‰
   â†“
ì„ë² ë”© ìƒì„± â†’ BigQuery ìœ ì‚¬ë„ ê²€ìƒ‰
   â†“
ê³¼ê±° ê²°ì • ì°¾ê¸°: "RTL ê³±ì…ˆ ìµœì í™”" (92% ìœ ì‚¬ë„)
```

---

## ğŸ›ï¸ ì„¤ì • íŒŒì¼

### debate_config.yaml

```yaml
debate:
  max_rounds: 4              # ìµœëŒ€ 4ë¼ìš´ë“œ
  consensus_threshold: 0.85  # 85% ì´ìƒì´ë©´ ìë™ ì±„íƒ
  expert_threshold: 0.70     # 70% ë¯¸ë§Œì´ë©´ Perplexity í˜¸ì¶œ

participants:
  claude:
    model: claude-sonnet-4-5-20250929
    temperature: 0.7         # ì°½ì˜ì„± (0=í™•ì •ì , 1=ì°½ì˜ì )
    max_tokens: 4096

  gemini:
    model: gemini-2.0-flash-exp
    temperature: 0.7
    max_tokens: 4096

  perplexity:
    model: llama-3.1-sonar-large-128k-online
    temperature: 0.5         # ì „ë¬¸ê°€ëŠ” ë” í™•ì •ì 
    enabled: true

agreement_scoring:
  embedding_weight: 0.6      # ì˜ë¯¸ë¡ ì  ìœ ì‚¬ë„ ê°€ì¤‘ì¹˜
  keyword_weight: 0.4        # í‚¤ì›Œë“œ ìœ ì‚¬ë„ ê°€ì¤‘ì¹˜
```

---

### vertex_config.yaml

```yaml
project_id: phsysics
location: us-central1

bigquery:
  dataset: my_physics_agent_stackoverflow_data
  table: questions_embeddings
  knowledge_dataset: knowledge_base
  knowledge_table: embeddings

gcs:
  bucket: multi-ai-memory-bank-phsysics
  folders:
    context: context/
    decisions: decisions/
    session_logs: session_logs/

embedding:
  model: textembedding-gecko@003
  dimensions: 768            # ì„ë² ë”© ë²¡í„° í¬ê¸°
  batch_size: 100           # í•œ ë²ˆì— 100ê°œì”© ì²˜ë¦¬

search:
  similarity_threshold: 0.7  # ìµœì†Œ ìœ ì‚¬ë„ 70%
  max_results: 10           # ìµœëŒ€ 10ê°œ ê²°ê³¼
```

---

## ğŸš€ ì‹¤í–‰ íë¦„ ìš”ì•½

### ë¡œì»¬ ì‹¤í–‰
```bash
python scripts/auto-debate.py "ì£¼ì œ"
   â†“
debate_engine.py ì‹¤í–‰
   â†“ (API í˜¸ì¶œ)
Claude â†” Gemini í† ë¡ 
   â†“
ê²°ê³¼ ì €ì¥ (docs/brain/)
   â†“
ì™„ë£Œ!
```

### GitHub ì‹¤í–‰
```bash
Issue ìƒì„± "[Debate] ì£¼ì œ"
   â†“
GitHub Actions íŠ¸ë¦¬ê±°
   â†“
multi_ai_runner.py ì‹¤í–‰
   â†“
Claude â†” Gemini í† ë¡ 
   â†“
ê²°ê³¼ ì»¤ë°‹ + Issue ëŒ“ê¸€
   â†“
vertex-sync.yml íŠ¸ë¦¬ê±°
   â†“
Vertex AI ë™ê¸°í™”
   â†“
ì™„ë£Œ!
```

---

## ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸

1. **ëª¨ë“  í† ë¡ ì€ ìë™ ì €ì¥** (GitHub + Vertex AI)
2. **ì„ë² ë”©ìœ¼ë¡œ ì˜ë¯¸ë¡ ì  ê²€ìƒ‰** ê°€ëŠ¥
3. **GitHub Actionsë¡œ ì™„ì „ ìë™í™”** ê°€ëŠ¥
4. **API í‚¤ë§Œ ìˆìœ¼ë©´ ë¡œì»¬ì—ì„œ ë¬´ë£Œ** ì‚¬ìš©
5. **ëª¨ë“  ì½”ë“œëŠ” Pythonìœ¼ë¡œ ì‘ì„±** (ìˆ˜ì • ì‰¬ì›€)

---

## ğŸ”§ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### í† ë¡  ë¼ìš´ë“œ ë³€ê²½
```yaml
# config/debate_config.yaml
max_rounds: 2  # ë¹ ë¥¸ í† ë¡ 
```

### í•©ì˜ ê¸°ì¤€ ë³€ê²½
```yaml
consensus_threshold: 0.90  # 90% ì´ìƒ ìš”êµ¬
```

### ëª¨ë¸ ë³€ê²½
```yaml
participants:
  claude:
    model: claude-opus-4-5  # ë” ê°•ë ¥í•œ ëª¨ë¸
```

### ê²€ìƒ‰ ì •í™•ë„ ì¡°ì •
```yaml
search:
  similarity_threshold: 0.8  # 80% ì´ìƒë§Œ
  max_results: 20           # ë” ë§ì€ ê²°ê³¼
```
